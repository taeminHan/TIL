> 밤새 한것들 이제야 정리하기 ㅎ.... 책을 더 봐야한다 이해가 잘 안된다...

# 편미분

$$f(x_0, x_1) = x_0^2 + x_1^2$$

위 식은 인수들의 제곱 합을 계산하는 단순한 식이다.

변수가 2개라는 특징이 있다.

위 식을 파이썬으로 구현하면 아래와 같다.

```python
def function_2(x):
    # 인수 x는 넘파이 배열이라고 가정하자
    return x[0] ** 2 + x[1] ** 2
    # 또는 np.sum(x**2)
```

주석 내용과 같이 인수 x는 넘파이 배열이라고 가정한다. 

여기서 키 포인트는

## '어느 변수에 대한 미분인가?'

즉, $x_0$와 $x_1$ 중 어느 변수에 대한 미분이냐를 구별해야한다.

이와 같이 변수가 여럿인 함수에 대한 미분을 **편미분** 이라고 한다. 

이 **편미분**을 $\frac{\delta f}{\delta x_0}$나 $\frac{\delta f}{\delta x_1}$처럼 쓴다.

편미분은 변수가 하나인 미분과 마찬가지로 특정 장소의 기울기를 구한다.

단, 여러 변수 중 목표 변수 하나에 초점을 맞추고 다른 변수는 값을 고정한다.

---

# 기울기

위에서는 $x_0$와 $x_1$의 편미분을 변수별로 따로 계산하는 방법을 익혔다.

만약 동시에 계산한다면?

가령 양쪽의 편미분을 묶어서 계산한다면 $(\frac{\delta f}{\delta x_0}, \frac{\delta f}{\delta x_1})$ 처럼 모든 변수의 편미분을 벡터로 정리한 것을 **기울기(***gradient***)**라고 한다.

```python
def numerical_gradient(f, x):
    h = 1e-4  # 0.001
    grad = np.zeros_like(x)  # x와 형상이 같은 배열을 생성

    for idx in range(x.size):
        tmp_val = x[idx]
        # f(x + h) 계산
        x[idx] = tmp_val + h
        fxh1 = f(x)

        # f(x-h) 계산
        x[idx] = tmp_val - h
        fxh2 = f(x)

        grad[idx] = (fxh1 - fxh2) / (2 * h)
        x[idx] = tmp_val  # 값 복원

    print(grad)
```

함수의 구현은 상당히 복잡하지만 동작 방식은 변수가 하나일때의 수치 미분과 거의 같다고 할 수 있다.

주석에 간단한 설명을 익히자!

```python
numerical_gradient(function_2, np.array([3.0, 4.0]))  # [6. 8.]
numerical_gradient(function_2, np.array([0.0, 2.0]))  # [0. 4.]
numerical_gradient(function_2, np.array([3.0, 0.0]))  # [6. 0.]
```

예시로 기울기를 구하였을때 값은 주석과 같이 나온다.

실제로는 6.00000~, 7.999999~라는 값을 얻지만 넘파이 배열을 출력할 때 수치를 보기 쉽도록 하공하기 때문에 위와같이 출력하게 된다.

**기울기**라는 의미를 알고 싶다면 그림으로 그려보자

![Figure_1](https://user-images.githubusercontent.com/5088870/107873227-6590dc00-6ef4-11eb-9f84-44ad585d2af2.png)


여기서는 기울기의 결과에 마이너스를 붙인 벡터를 그린것이다.

위 그림처럼 방향을 가진 벡터로 그려진다.

기울기는 함수의 **'가장 낮은 장소(최소값)'**를 가리키는 것 같다. 또한 **'가장 낮은곳'**

에서 멀어질수록 화살표의 크기가 커짐을 알 수 있다.

기울기는 가장 낮은 장소를 가리키는 것이 맞다, 하지만 사실 **기울기는 각 지점에서 낮아지는 방향을 가리키는 것**이다.

기울기가 가리키는 쪽은 각 장소에서 함수의 출력 값을 가장 크게 줄이는 방향

### 매우 중요하다!
